<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>67</title>
  <style>
    :root{
      --bg:#060a06;
      --fg:#9cff9c;
      --dim:#5aa85a;
      --panel:#071107;
      --border:#1f5a1f;
    }
    *{ box-sizing:border-box; }
    body{
      margin:0;
      min-height:100vh;
      display:grid;
      place-items:center;
      background:radial-gradient(1200px 600px at 50% 40%, #0a170a 0%, var(--bg) 55%, #020402 100%);
      color:var(--fg);
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      overflow:hidden;
    }

    /* CRT-ish vibe */
    .crt:before{
      content:"";
      position:fixed;
      inset:0;
      background:
        linear-gradient(to bottom, rgba(255,255,255,0.03), rgba(0,0,0,0.02)),
        repeating-linear-gradient(to bottom, rgba(0,0,0,0.20), rgba(0,0,0,0.20) 1px, rgba(255,255,255,0.02) 2px, rgba(255,255,255,0.02) 3px);
      pointer-events:none;
      mix-blend-mode:overlay;
      opacity:.55;
    }
    .crt:after{
      content:"";
      position:fixed;
      inset:-2px;
      border:2px solid rgba(120,255,120,0.05);
      pointer-events:none;
      filter:blur(0.3px);
    }

    /* Rotating 67 */
    .badge{
      width:min(380px, 70vw);
      height:min(380px, 70vw);
      display:grid;
      place-items:center;
      cursor:pointer;
      user-select:none;
      position:relative;
      transform-style:preserve-3d;
      animation:spin 4.2s linear infinite;
    }
    .badge .num{
      font-size:clamp(72px, 18vw, 140px);
      letter-spacing:0.08em;
      text-shadow:0 0 12px rgba(120,255,120,0.35);
    }
    .badge .hint{
      position:absolute;
      bottom:10%;
      font-size:12px;
      color:var(--dim);
      opacity:0.9;
      text-transform:uppercase;
      letter-spacing:0.18em;
    }
    @keyframes spin{
      0%{ transform:rotateY(0deg) rotateX(8deg); }
      100%{ transform:rotateY(360deg) rotateX(8deg); }
    }

    /* Terminal window */
    .terminal{
      width:min(720px, 92vw);
      background:linear-gradient(180deg, rgba(10,20,10,0.95), rgba(5,10,5,0.95));
      border:1px solid var(--border);
      box-shadow:0 0 40px rgba(80,255,80,0.10);
      border-radius:14px;
      overflow:hidden;
      display:none;
    }
    .bar{
      display:flex;
      align-items:center;
      gap:10px;
      padding:10px 14px;
      background:rgba(10,30,10,0.6);
      border-bottom:1px solid rgba(50,120,50,0.35);
    }
    .dot{ width:10px; height:10px; border-radius:50%; background:rgba(156,255,156,0.25); }
    .title{
      margin-left:auto;
      font-size:12px;
      color:var(--dim);
      letter-spacing:0.14em;
      text-transform:uppercase;
    }
    .screen{
      padding:16px 16px 10px 16px;
      min-height:240px;
      background:rgba(6,12,6,0.65);
    }
    .line{
      white-space:pre-wrap;
      line-height:1.45;
      font-size:15px;
      margin:0 0 10px 0;
    }
    .cursor{
      display:inline-block;
      width:10px;
      margin-left:2px;
      background:var(--fg);
      height:1.1em;
      transform:translateY(2px);
      animation:blink 0.85s steps(1) infinite;
      opacity:.8;
    }
    @keyframes blink{ 50%{ opacity:0; } }

    .controls{
      display:flex;
      gap:10px;
      padding:12px 16px 16px;
      background:rgba(6,12,6,0.65);
      border-top:1px solid rgba(50,120,50,0.25);
      flex-wrap:wrap;
    }
    button{
      background:rgba(10,25,10,0.8);
      color:var(--fg);
      border:1px solid rgba(80,200,80,0.35);
      border-radius:10px;
      padding:10px 12px;
      font:inherit;
      cursor:pointer;
      transition:transform .06s ease, background .15s ease;
    }
    button:hover{ background:rgba(15,35,15,0.9); }
    button:active{ transform:translateY(1px); }
    .ghost{ color:var(--dim); border-color:rgba(80,200,80,0.18); }

    .choices{
      display:none;
      gap:10px;
      width:100%;
    }

    /* helper */
    .center{
      display:grid;
      place-items:center;
      gap:14px;
      padding:24px;
    }
  </style>
</head>

<body class="crt">
  <!-- Start badge -->
  <div id="badge" class="badge" aria-label="67">
    <div class="num">67</div>
    <div class="hint">click to open</div>
  </div>

  <!-- Terminal -->
  <div id="terminal" class="terminal" role="dialog" aria-label="terminal">
    <div class="bar">
      <div class="dot"></div><div class="dot"></div><div class="dot"></div>
      <div class="title">protocol_console</div>
    </div>

    <div class="screen" id="screen"></div>

    <div class="controls">
      <button id="nextBtn">Weiter</button>
      <button id="rebootBtn" class="ghost" style="margin-left:auto;">Reboot</button>
      <div class="choices" id="choices">
        <button id="selfBtn">Selbstzerstörung (joke)</button>
        <button id="endBtn">Beenden</button>
      </div>
    </div>
  </div>

<script>
  const badge = document.getElementById('badge');
  const terminal = document.getElementById('terminal');
  const screen = document.getElementById('screen');
  const nextBtn = document.getElementById('nextBtn');
  const rebootBtn = document.getElementById('rebootBtn');
  const choices = document.getElementById('choices');
  const selfBtn = document.getElementById('selfBtn');
  const endBtn = document.getElementById('endBtn');

  const lines = [
    "67 DETECTED",
    "loading message...",
    "starting protocol: BIGB31010203",
    "ok ehrlich:",
    "Bilcan, du bist lowkey lustig — und wir sind echt cool miteinander.",
    "Ich wollt dir das nur kurz sagen. Kein großes Ding.",
    "Auswahl: [Selbstzerstörung]  [Beenden]"
  ];

  const finalLine = "ich feier unseren vibe.";

  let lineIndex = 0;
  let isTyping = false;

  function clearScreen(){
    screen.innerHTML = "";
    lineIndex = 0;
    choices.style.display = "none";
    nextBtn.style.display = "inline-block";
  }

  function addLineContainer(){
    const p = document.createElement('p');
    p.className = "line";
    screen.appendChild(p);
    screen.scrollTop = screen.scrollHeight;
    return p;
  }

  async function typeLine(text){
    isTyping = true;
    const p = addLineContainer();
    const cursor = document.createElement('span');
    cursor.className = "cursor";
    p.appendChild(cursor);

    // typewriter
    let i = 0;
    while(i < text.length){
      // insert before cursor
      cursor.insertAdjacentText('beforebegin', text[i]);
      i++;
      await new Promise(r => setTimeout(r, 18)); // speed
    }

    cursor.remove();
    isTyping = false;
  }

  async function next(){
    if(isTyping) return;

    // if last normal line typed -> show choices
    if(lineIndex >= lines.length){
      nextBtn.style.display = "none";
      return;
    }

    const text = lines[lineIndex];
    lineIndex++;

    await typeLine(text);

    if(lineIndex === lines.length){
      // after "Auswahl..." line
      choices.style.display = "flex";
      nextBtn.style.display = "none";
    }
  }

  async function finish(choice){
    if(isTyping) return;
    choices.style.display = "none";
    await typeLine(choice === 'self'
      ? "SYSTEM: Selbstzerstörung abgebrochen. (war ein joke)"
      : "SYSTEM: Session beendet."
    );
    await typeLine(finalLine);
    await typeLine("—");
    await typeLine("Reboot? (oben rechts)");
  }

  badge.addEventListener('click', () => {
    badge.style.display = "none";
    terminal.style.display = "block";
    clearScreen();
    next();
  });

  nextBtn.addEventListener('click', next);
  rebootBtn.addEventListener('click', () => {
    terminal.style.display = "none";
    badge.style.display = "grid";
  });

  selfBtn.addEventListener('click', () => finish('self'));
  endBtn.addEventListener('click', () => finish('end'));

  // keyboard: space/enter for next
  window.addEventListener('keydown', (e) => {
    if(terminal.style.display !== "block") return;
    if((e.key === "Enter" || e.key === " ") && nextBtn.style.display !== "none"){
      e.preventDefault();
      next();
    }
  });
</script>
</body>
</html>
